# encoding: utf-8

darwin = sys.platform.startswith('darwin')

obj = bld.create_obj('cpp', 'program')
obj.source = '''
unit.cpp filter_tests.cpp test1.cpp http_connection.cpp http_utils.cpp
config_tests.cpp keywords.cpp uri.cpp encodings.cpp logger.cpp
'''
obj.includes = ['../include', '../testsoon/include']
obj.uselib = '''
BOOST BOOST_IOSTREAMS BOOST_SYSTEM BOOST_FILESYSTEM GNUTLS GCRYPT BZ2 Z
'''
if darwin:
    obj.env['LINKFLAGS'] += ['../librest.a']
else:
    obj.uselib_local = 'rest'
obj.target = 'unit'

obj = bld.create_obj('cpp', 'program')
obj.source = 'http-handler-test.cpp'
obj.uselib = '''
BOOST BOOST_IOSTREAMS BOOST_FILESYSTEM BOOST_SYSTEM GNUTLS GPGERR BZ2 Z
'''
obj.includes = ['../include', '../testsoon/include']
if darwin:
    obj.env['LINKFLAGS'] += ['../librest.a']
else:
    obj.uselib_local = 'rest'
obj.target = 'http-handler-test'
